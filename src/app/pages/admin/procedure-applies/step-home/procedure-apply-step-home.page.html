<div class="m-2 p-4 bg-color-0 br-8" *ngIf="applyStep">
  <div class="fontSize-22 fontWeight-semiBold mb-3">Procédure en cours / {{applyStep.procedureStep.name}}</div>

  <div class="divider"></div>
  <div class="my-2">
    <button mat-button color="primary" *ngIf="!applyStep.validated" (click)="validateStep()">
      <mat-icon>done</mat-icon>
      Valider l'étape
    </button>
    <button mat-button color="warn" class="ms-3" *ngIf="applyStep.validated" (click)="invalidateStep()">
      <mat-icon>unpublished</mat-icon>Invalider l'étape
    </button>
    <button mat-button color="primary"  class="ms-3" (click)="addPayment()">
      <mat-icon>paid</mat-icon>Ajouter un paiement
    </button>
  </div>
  <div class="divider"></div>

  <dl class="description-list">
    <dt>État</dt>
    <dd>
      <span *ngIf="applyStep.validated" style="padding: 0px 4px; border: 1px solid; border-radius: 4px"
            class="borderColor-green fontColor-green fontSize-12">Validée</span>

      <span *ngIf="!applyStep.validated">En attente</span>
    </dd>


  </dl>

  <div *ngIf="applyStep.payments" class="mt-4">
    <div class="fontSize-18 fontWeight-semiBold">Paiments</div>

    <a class="mt-3 br-4 p-3 bg-color-10 borderColor-20 bg-color-20--hover divLink d-flex align-items-center"
       *ngFor="let payment of applyStep.payments">
     <div class="flex-grow-1">
       <div class="fontWeight-semiBold">{{payment.amount | number}} FCFA</div>
       <div class="fontSize-12">{{payment.createdAt.toFormat('ff')}}</div>
     </div>

      <div>
        <button mat-icon-button [matMenuTriggerFor]="menu"> <mat-icon>more_vert</mat-icon>  </button>
        <mat-menu #menu="matMenu">
          <button mat-menu-item >
            Supprimer le paiement
          </button>
        </mat-menu>
      </div>
    </a>

  </div>

</div>
