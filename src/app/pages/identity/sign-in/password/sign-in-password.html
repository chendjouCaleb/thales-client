<div class="d-flex align-items-center ms-2">
  <button (click)="back()" MyIconButton class="me-2">
    <lucide-icon [img]="icons.ArrowLeftIcon"></lucide-icon>
  </button>

  <div style="font-size: 16px; font-weight: 500">Mot de passe</div>
</div>

<div class="mt-3 mx-4 opacity-8">Pour terminer la création de votre compte, renseignez un mot de passe.</div>

<div [formGroup]="formGroup" class="mx-4 mt-3">
  <div>
    <TextField class="w-100">
      <label for="password-field" TextFieldLabel>Mot de passe</label>
      <input [type]="inputType" TextFieldInput formControlName="password" id="password-field">
    </TextField>

    @if (passwordField.invalid && (passwordField.dirty || !passwordField.untouched)) {
      <div *ngIf="passwordField.errors?.['required']" class="warn-text">Veuillez renseigner vun mot de passe.</div>
      <div *ngIf="passwordField.errors?.['minlength']" class="warn-text">
        Votre mot de passe doit contenir au moins 6 caractères.
      </div>
    }
  </div>

  <div class="mt-2">
    <TextField  class="w-100">
      <label TextFieldLabel>Confirmer le mot de passe</label>
      <input [type]="inputType" TextFieldInput formControlName="passwordMatcher" id="password-matcher-field">
    </TextField>

    @if (passwordMatcherField.invalid && (passwordMatcherField.dirty || !passwordMatcherField.untouched)) {
      <div *ngIf="passwordMatcherField.errors?.['required']" class="warn-text">Veuillez confirmer votre mot de passe.</div>
    }

    <div *ngIf="formGroup.hasError('passwordMatcher') && passwordMatcherField.dirty" class="warn-text">
      Les deux mots de passe renseignés ne sont pas identiques.
    </div>
  </div>

  <div>
    <mat-checkbox (change)="changeInputType($event.checked)" color="primary">Afficher le mot de passe</mat-checkbox>
  </div>
</div>


<div class="p-4 align-end">
  <button MyButton color="primary" (click)="resetPassword()"> Créer le compte</button>
</div>
