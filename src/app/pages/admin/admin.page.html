<th-scaffold #scaffold>
  <scaffold-toolbar>

    <button sidenav-toggle style="margin-left: 8px; margin-right: 8px" MyIconButton aria-label="Open menu icon"
            #sidebarToggleBtn (click)="scaffold.sidenav.toggle()">
      <lucide-icon [img]="icons.MenuIcon"  strokeWidth="1.5"></lucide-icon>
    </button>
  </scaffold-toolbar>
  <mat-sidenav-container style="height: 100%">
    <mat-sidenav mode="side" [opened]="true">

      <div class="sidenav-content" style="">
        <div class="d-flex align-items-center py-3" style="padding-left: 16px">
          <lucide-icon [img]="icons.BuildingIcon" [size]="32"></lucide-icon>
          <div class="ms-3">
            <div class="fontSize-16 fontWeight-semiBold" *ngIf="space">{{space.name}}</div>
            <div class="fontSize-12" style="opacity: .6;">Espace</div>
          </div>
        </div>


        <th-nav style="padding: 4px" class="mt-2">


          <a href="#" th-nav-item [routerLink]="['/spaces', space?.identifier, 'customers']">
            <lucide-icon [img]="icons.UsersIcon" th-nav-item-icon  strokeWidth="1.75"></lucide-icon>
            <span>Clients</span>
          </a>

          <a href="#" th-nav-item routerLink="procedures">
            <lucide-icon [img]="icons.FileTextIcon" th-nav-item-icon  strokeWidth="1.75"></lucide-icon>
            Procédures
          </a>

          <a href="#" th-nav-item routerLink="procedure-applies">
            <lucide-icon [img]="icons.WalletCardsIcon" th-nav-item-icon  strokeWidth="1.75"></lucide-icon>
            Procédures en cours
          </a>

          <a routerLink="plane-tickets" th-nav-item>
            <lucide-icon [img]="icons.TicketsPlaneIcon" th-nav-item-icon  strokeWidth="1.75"></lucide-icon>
            Billets d'avion</a>
          <a routerLink="payments" th-nav-item>
            <lucide-icon [img]="icons.DollarSignIcon" th-nav-item-icon  strokeWidth="1.5"></lucide-icon>
            Paiements</a>



          <a routerLink="events" th-nav-item>
            <lucide-icon [img]="icons.HistoryIcon" th-nav-item-icon  strokeWidth="1.5"></lucide-icon>
            Historique</a>

          <a th-nav-item routerLink="members">
            <lucide-icon [img]="icons.UsersIcon" th-nav-item-icon  strokeWidth="2"></lucide-icon>
            Membres</a>

          <a routerLink="settings" th-nav-item>
            <lucide-icon [img]="icons.SettingsIcon" th-nav-item-icon  strokeWidth="1.5"></lucide-icon>
            Paramètres</a>

          <DIV class="divider m-2"></DIV>

          <div>
            <div class="ms-3 py-2 fontWeight-semiBold fontSize-12">Agences</div>
            <a [routerLink]="['/agencies', agency.id]" th-nav-item *ngFor="let agency of agencies">
              {{agency.name}}</a>

            @if(getAgencyListTask.success && agencies.length == 0) {
              <div class="surface p-2 mx-3 borderRadius-8 fontSize-12 fontWeight-light">
                Aucune agence dans cet espace.
              </div>
            }
            @if(getAgencyListTask.loading) {
              <div class="d-flex align-items-center justify-content-center p-3">
                <mat-spinner strokeWidth="2" diameter="32"></mat-spinner>
              </div>
            }
          </div>
        </th-nav>
      </div>
    </mat-sidenav>
    <mat-sidenav-content>
      <div style="background: var(--my-backgroundColor); color: var(--my-OnBackgroundColor); height: 100%;
      overflow: auto">
        @if (space){
          <router-outlet></router-outlet>
        }
      </div>
    </mat-sidenav-content>
  </mat-sidenav-container>
</th-scaffold>
