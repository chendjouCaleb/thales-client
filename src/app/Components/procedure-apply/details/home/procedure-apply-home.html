@if(procedureApply.isLocked) {
  <div class="marginVertical-16 borderRadius-8 padding-16 fontSize-16 d-flex flex-column-gap-16"
       style="background-color: var(--my-color-errorContainer); color: var(--my-color-onErrorContainer)">

    <lucide-icon [img]="icons.CircleAlertIcon"></lucide-icon>
    <div class="flex-grow-1">Cette procédure est bloquée. Aucune opération n'est donc autorisée sur elle.</div>
  </div>
}

<dl class="description-list">

  <dt>Code</dt>
  <dd>#000000</dd>

  <dt>État</dt>
  <dd>
    <MyBadge *ngIf="!procedureApply.isDone" color="neutral">En cours</MyBadge>
    <MyBadge *ngIf="procedureApply.isDone" color="success">Clôturée</MyBadge>

  </dd>

  <dt>Procédure</dt>
  <dd>
    <a [routerLink]="['/admin', procedureApply.space?.identifier, 'procedures', procedureApply.procedureId]">
      {{ procedureApply.procedure.name }}
    </a>
  </dd>


  <dt>Client</dt>
  <dd>
    <a [routerLink]="['/admin', procedureApply.space?.identifier, 'customers', procedureApply.customerId]">
    {{ procedureApply.customer.fullName }}
    </a>
  </dd>

  <dt>Agence</dt>
  <dd>
    <a [routerLink]="['/agencies', procedureApply.agencyId]">
      {{ procedureApply.agency?.name }}
    </a>
  </dd>

  <dt>Date d'engagement</dt>
  <dd>{{ procedureApply.createdAt.toFormat('ff') }}</dd>

</dl>

<div class="marginTop-16">
  <div class="fontSize-12 opacity-6">Progression</div>
  <div>
    <ProcedureApplyProgressBar [procedureApply]="procedureApply"></ProcedureApplyProgressBar>
  </div>
</div>
<div *ngIf="procedureApply.procedureApplySteps" class="mt-4">
  <div class="fontSize-18 fontWeight-semiBold">Étapes</div>

  <div class="mt-3 br-4 p-3  divLink d-flex align-items-center surface hover cursor-pointer flex-column-gap-24"
       *ngFor="let applyStep of procedureApply.procedureApplySteps"
       (click)="openDetails(applyStep)"
  >

    <div class="fontWeight-semiBold fontSize-22">
      {{applyStep.procedureStep.index + 1}}
    </div>

    <div>
      <div class="fontWeight-semiBold fontSize-16">
        {{ applyStep.procedureStep?.name }}
      </div>
      <div *ngIf="applyStep.validated">
        {{ applyStep.totalPayment.format() }}
      </div>

      <div *ngIf="!applyStep.validated">
        <MyBadge color="warn">En attente</MyBadge>
      </div>

      <div *ngIf="applyStep.validated">
        <MyBadge color="success">Validée</MyBadge>
      </div>
    </div>
  </div>

</div>

